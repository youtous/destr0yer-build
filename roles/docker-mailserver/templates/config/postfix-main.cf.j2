# additional config for postfix main.cf
# see https://kruyt.org/postfix-and-tls-encryption/

smtpd_tls_protocols = {{ mailserver_tls_ciphers|join(', ') }}
smtp_tls_protocols = {{ mailserver_tls_ciphers|join(', ') }}
smtp_tls_ciphers = high
smtpd_tls_ciphers = high
smtpd_tls_mandatory_protocols = {{ mailserver_tls_ciphers|join(', ') }}
smtp_tls_mandatory_protocols = {{ mailserver_tls_ciphers|join(', ') }}
smtp_tls_mandatory_ciphers = high
smtpd_tls_mandatory_ciphers = high

# enable oppertunistic
smtpd_tls_security_level = may
smtp_tls_security_level = may

# disable tls renegotiation
tls_ssl_options = NO_RENEGOTIATION