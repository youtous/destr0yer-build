---
# main domain of the server
mailserver_domain: "{{ hostname }}"
# hostname of the mailserver host
mailserver_hostname: "{{ hostname }}"

# manual, letsencrypt, custom, self-signed
mailserver_ssl_type: letsencrypt
mailserver_tls_level: modern # drop old tls ciphers

# Rainloop
rainloop_enabled: true
rainloop_domain: "mail.{{ hostname }}"

# traefik public-tag
traefik_public_tag: "traefik-public"
# name of the traefik network
traefik_network: "traefik-public"
rainloop_max_connections: 100 # maximum of simultaneous requests
rainloop_max_requests_3s_per_client: 100 # maximum of requests per client in 3s
rainloop_max_request_size_megabytes: 128 # maximum size of request in MB

rainloop_mysql_database: rainloop
rainloop_mysql_user: rainloop
rainloop_mysql_password:

# activate debug mode
mailserver_debug: false

# use only stmp
mailserver_only_smtp: false

# allow localhost (empty), host, network (docker network) or connected-networks (all docker networks) to send emails (mynetworks)
mailserver_allowed_networks: host

# Postfix
mailserver_postmaster_address: "postmaster@{{ mailserver_domain }}"
mailserver_default_mailbox_limit_mb: 500
mailserver_message_size_limit_mb: 12
mailserver_postscreen_action: enforce

# whitelisted ip or domain not considered by postgrey
mailserver_whitelist_clients: []

# ban list for receive/send emails
mailserver_send_restricted: [] # emails banned to be used as destination
mailserver_receive_restricted: [] # emails banned to send email to this server

# domains configuration
mailserver_domains:
  # Generate DKIM using : https://dkimcore.org/specification.html
  # openssl genrsa -out mail.heaven-pascal.youtous.me.priv 2048
  # openssl rsa -in mail.heaven-pascal.youtous.me.priv -pubout >mail.heaven-pascal.youtous.me.pub
  # - domain: mail.heaven-pascal.youtous.me
  #  dkim_private: |
  #  dkim_public: |
  #  aliases:
  #    - alias: joe@heaven-pascal.youtous.me
  #      to: monitoring@heaven-pascal.youtous.me
  #  aliases_regexp:
  #    - regexp: /^test[0-9][0-9]*@heaven-pascal.youtous.me/
  #      to: monitoring@heaven-pascal.youtous.me
  #  accounts:
  #    - username:
  #      bcrypt_password: "" # use bcrypt-passwd.sh script to generate password


# Reporting
mailserver_reporting_interval: "weekly"
mailserver_reporting_recipient: "{{ mailserver_postmaster_address }}"

# Postgrey
mailserver_enable_postgrey: true
# greylist for N seconds
mailserver_postgrey_delay: 300
# delete entries older than N days since the last time that they have been seen
mailserver_postgrey_max_age: 35
# whitelist host after N successful deliveries (N=0 to disable whitelisting)
mailserver_postgrey_auto_whitelist: 5

# SpamAssassin
mailserver_enable_spamassassin: true

# Enable autoconfig service
mailserver_enable_autodiscover: true
mailserver_autodiscover_max_connections: 100 # maximum of simultaneous requests
mailserver_autodiscover_max_requests_3s_per_client: 20 # maximum of requests per client in 3s
mailserver_autodiscover_max_request_size_megabytes: 4 # maximum size of request in MB

# Fail2ban
mailserver_enable_fail2ban: true
# Fail2ban on docker host
mailserver_enable_host_fail2ban: true

# ManageSieve, used by clients, for instance on RainLoop, port is not exposed
mailserver_enable_managesieve: true

# Fetchmail
mailserver_enable_fetchmail: false
mailserver_fetchmail_poll_interval: 300

# ClamAV
mailserver_enable_clamav: false
mailserver_virus_delete_delay: "7 days"
...