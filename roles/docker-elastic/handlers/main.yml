---
# due to immutable configs of docker in swarm mode, we must remove the stack...
- name: cleanup current elastic stack
  docker_stack:
    state: absent
    name: elastic
  listen: "deploy elastic"

- name: deploy elastic stack
  docker_stack:
    state: present
    name: elastic
    compose:
      - "{{ elastic_compose_file_dest }}"
  listen: "deploy elastic"
...