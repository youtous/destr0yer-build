# from https://wiki.debian-fr.xyz/Monit

{% for monit_wireguard_interface in monit_wireguard_interfaces %}
check process wg-quick-{{ monit_wireguard_interface }}
  matching "wg-crypt-{{ monit_wireguard_interface }}"
  start program = "/usr/bin/systemctl start wg-quick@{{ monit_wireguard_interface }}.service"
  stop  program = "/usr/bin/systemctl stop wg-quick@{{ monit_wireguard_interface }}.service"
  if 5 restarts within 5 cycles then timeout

{% endfor %}