---
# This role contains the default policy for logrotate
- name: Include default vars
  include_vars: default.yml

- name: Install cron
  apt:
    pkg: cron
    state: present

- name: Enable cron
  service:
    name: cron
    state: started
    enabled: yes

- name: Override kernel.conf service | Remove networking operation
  become: yes
  copy:
    src: files/services/kernel.conf
    dest: /etc/logwatch/conf/services/kernel.conf
    owner: root
    group: root
    mode: u=rw,g=r,o=r

- name: Setup Logwatch
  become: yes
  import_role:
    name: youtous.logwatch
  vars:
    logwatch_email: "{{ logwatch_email }}"
    logwatch_detail: "{{ logwatch_detail }}"