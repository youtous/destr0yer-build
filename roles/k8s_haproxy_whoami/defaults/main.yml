---
# This role deploys a whoami image, useful for tests and debugging

k8s_haproxy_whoami_image_version: "latest"
k8s_haproxy_whoami_image: "docker.io/traefik/whoami:{{ k8s_haproxy_whoami_image_version }}"

k8s_haproxy_whoami_namespace: whoami
k8s_haproxy_whoami_domain: "who.{{ k8s_base_cluster_domain }}"
k8s_haproxy_whoami_replicas: 1

k8s_haproxy_whoami_allowlist: "{{ (trusted_backend_ips + ['127.0.0.1'] | flatten) | join(', ') }}"

k8s_haproxy_whoami_basic_auth_secret_name: whoami-haproxy-credentials
k8s_haproxy_whoami_basic_auth_users: "{{ backend_users | default([]) }}"
# - username: myuser
#   password: myencryptedpassword

# if set to false, namespace will be deleted with associated resources
k8s_haproxy_whoami_enabled: true

# letsencrypt
k8s_haproxy_whoami_tls_secret_name: "whoami-ingress-tls"
k8s_haproxy_whoami_tls_issuer_name: "letsencrypt"

# kube config
k8s_haproxy_whoami_kubeconfig_path: "{{ ansible_env.HOME }}/.kube/config"
k8s_haproxy_whoami_token: "{{ k8s_service_account_admin_token }}"
...
