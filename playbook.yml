---

# This play describes required tasks to build a new destr0yer
# After being done, use the regular PLAY
- name: Prepare a new system
  hosts: factoring_destroyers
  remote_user: root
  roles:
    - apt # update the system
    - system-packages # system packages (htop, curl etc)
    - users # create a sudo user that will be used for configuration
  vars_files:
    - secret_vars/all.yml
    # each host has a secret file
    - "secret_vars/{{ inventory_hostname }}.yml"
  tags: ["new-systems"]

# This play describe tasks for an existing destr0yer
- name: Configure compliant system
  hosts: destr0yers
  remote_user: "{{ arbiter_username }}"
  roles:
    - apt # update the system
    # - system-packages # system packages (htop, curl etc)
    # - users # create a sudo user that will be used for configuration
    - system-configuration # configure the system (selinux, timezone...)
    # - system-tools # server cli tools (vim, ccat, etc)
  vars_files:
    - secret_vars/all.yml
    - task_vars/sudo.yml
    - "secret_vars/{{ inventory_hostname }}.yml"
  tags: ["configure-systems"]


...
